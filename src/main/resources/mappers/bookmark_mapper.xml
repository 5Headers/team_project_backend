<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="project_5headers.com.team_project.mapper.BookmarkMapper">

    <insert id="addBookmark">
        INSERT INTO bookmark_tb (estimate_id, user_id, title, content, create_dt)
        VALUES (#{estimateId}, #{userId}, #{title}, #{content}, NOW())
    </insert>

    <resultMap id="BookmarkResultMap" type="project_5headers.com.team_project.entity.Bookmark">
        <id property="bookmarkId" column="bookmark_id"/>
        <result property="estimateId" column="estimate_id"/>
        <result property="userId" column="user_id"/>
        <result property="title" column="title"/>
        <result property="content" column="content"/>
        <result property="createDt" column="create_dt"/>
    </resultMap>

    <insert id="addBookmark">
        INSERT INTO bookmark_tb (estimate_id, user_id, create_dt)
        VALUES (#{estimateId}, #{userId}, NOW())
    </insert>

    <select id="getBookmarkById" resultMap="BookmarkResultMap">
        SELECT * FROM bookmark_tb WHERE bookmark_id = #{bookmarkId}
    </select>

    <select id="getBookmarksByUserId" resultMap="BookmarkResultMap">
        SELECT * FROM bookmark_tb WHERE user_id = #{userId} ORDER BY create_dt DESC
    </select>

    <delete id="removeBookmarkById">
        DELETE FROM bookmark_tb WHERE bookmark_id = #{bookmarkId}
    </delete>

</mapper>
